{% extends 'assessment-rooted.html' %}

{% load bs4 split %}

{% block content %}
<h2>Results ({{page_obj.paginator.count}} found)</h2>
{% include 'common/inline_filter_form.html' %}
<table class="table table-sm table-striped">
    {% bs4_colgroup '15,10,10,10,15,15,10,15' %}
    {% bs4_thead 'Name,Study,Design,Cause,Effect,Modifying Factors,Derived Value,Comments' %}
    <tbody id="result-tbody">
        {% for object in result_list %}
        
        <tr hx-target="this" hx-swap="outerHTML" id="result-{{object.id}}">
            <td>{{object.name}}</td>
            <td>{{object.design.study.short_citation}}</td>
            <td>{{object.design.name}}</td>
            <td>{{object.cause.name}}</td>
            <td>{{object.effect.name }}</td>
            <td>
                {% split object.modifying_factors as factors %}
                {% for factor in factors %}
                <span class="badge badge-secondary">{{factor}}</span>
                {% endfor %}
            </td>
            <td>{{object.derived_value|floatformat:3 }}</td>
            <td>{{object.comments}}</td>
        </tr>
        
        {% empty %}
            {% bs4_fullrow 'No results available.' %}
        {% endfor %}
    </tbody>
</table>

{% include "includes/paginator.html" with plural_object_name="results" %}

{% endblock %}