{% extends 'assessment-rooted.html' %}

{% block content %}
  <form method="post">
    {% crispy form %}
    <a class="btn mt-1 btn-primary flex-shrink-0 align-self-start ml-auto"
       hx-post="{% url 'study:clone_from_assessment-htmx' assessment.pk 'update' %}"
       hx-trigger="click"
       hx-indicator="#spinner-{{object.pk}}"
       hx-target="#src-assessment-details"
       hx-encoding="multipart/form-data">
      Get Studies
    </a>
    <i class="fa fa-spinner fa-spin htmx-indicator ml-3" id="spinner-{{object.pk}}" aria-hidden="true"></i>
    <br><br>
    <div id="src-assessment-details">
      {% include "study/fragments/src_clone_details.html" %}
    </div>
  </form>
{% endblock %}

{% block extrajs %}
  <script type="text/javascript">
    $(document).ready(function(){
      const hideTable = function(e){
        $("#src-assessment-details-fragment").hide();
      };
      $('#id_assessment').on('change', hideTable).trigger('change');
    });
  </script>
{% endblock extrajs %}
