{% extends 'assessment-rooted.html' %}

{% block content %}
  <div class="d-flex">
    <h2>{{object.name}}</h2>
    {% if obj_perms.edit and crud == "Read" %}
      {% actions %}
        <span class="dropdown-header">Experiment editing</span>
        <a class="dropdown-item" href="{{object.get_update_url}}">Update</a>
        <a class="dropdown-item" href="{{object.get_delete_url}}">Delete</a>
        <a class="dropdown-item" href="{% url 'vocab:api:guideline_profile-export' object.guideline %}?format=csv">View guideline profiles</a>
        {% if assessment.enable_observations and object.guideline %}
          <a class="dropdown-item" href="{% url 'vocab:observation-list' object.pk %}?order_by=system">View observations</a>
        {% endif %}
      {% endactions %}
    {% endif %}
  </div>
  {% include "animalv2/fragments/_experiment_table.html" %}

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Chemicals</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '40,30,30' %}
        {% bs4_thead 'Name,CAS,DTXSID' %}
        <tbody>
          {% for object in object.v2_chemicals.all %}
            {% include "animalv2/fragments/_chemical_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No chemicals available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Animal Groups</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '40,20,20,20' %}
        {% bs4_thead 'Name,Species,Strain,Sex' %}
        <tbody>
          {% for object in object.v2_animal_groups.all %}
            {% include "animalv2/fragments/_animalgroup_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No animal groups available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Treatments</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '60,40' %}
        {% bs4_thead 'Name,Chemical' %}
        <tbody>
          {% for object in object.v2_treatments.all %}
            {% include "animalv2/fragments/_treatment_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No treatments available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Endpoints</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '40,20,20,20' %}
        {% bs4_thead 'Name,System,Organ,Effect' %}
        <tbody>
          {% for object in object.v2_endpoints.all %}
            {% include "animalv2/fragments/_endpoint_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No endpoints available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Endpoint Timepoints</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '40,30,30' %}
        {% bs4_thead 'Endpoint,Time,Units' %}
        <tbody>
          {% for object in object.get_v2_timepoints %}
            {% include "animalv2/fragments/_observationtime_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No timepoints available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card my-4 mx-2">
    <div class="card-body">
      <h3 class="card-title">Data Extractions</h3>
      <table class="table table-sm table-striped">
        {% bs4_colgroup '50,50' %}
        {% bs4_thead 'Endpoint,Timepoint' %}
        <tbody>
          {% for object in object.v2_data_extractions.all %}
            {% include "animalv2/fragments/_dataextraction_row.html" %}
          {% empty %}
            {% bs4_fullrow 'No data extractions available.' %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

{% endblock %}
