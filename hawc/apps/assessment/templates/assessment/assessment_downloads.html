{% extends 'assessment-rooted.html' %}

{% block content %}
  <h2>{{object}} downloads</h2>

  <p class='form-text text-muted'>
    All data from HAWC are exportable into Excel. Developer exports in JSON
    format are also available (please <a target="_blank" href="{% url 'contact' %}">contact us</a> for more information).
    Visualizations can be exported into SVG and PNG formats;
    you can download each individual visualization when being viewed.
  </p>

  <div class="card-columns">
    {% if assessment.enable_literature_review and assessment.has_lit_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">Literature Review</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'lit:api:assessment-reference-export' assessment.pk %}?format=xlsx">Reference Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Get all references in an assessment.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
                {% if obj_perms.edit and assessment.literature_settings.conflict_resolution %}
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'lit:api:assessment-user-tag-export' assessment.pk %}?format=xlsx">Reference Export with user tags&nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Get all references in an assessment, including user tags.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet. Team members only.</i></small></p>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
    {% endif %}


    {% if assessment.enable_risk_of_bias and assessment.has_rob_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">{{assessment.get_rob_name_display}}</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'riskofbias:api:assessment-export' assessment.pk %}?format=xlsx">{{assessment.get_rob_name_display}} Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Get all final {{assessment.get_rob_name_display}} reports for an assessment.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
                {% if obj_perms.edit %}
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'lit:api:assessment-user-tag-export' assessment.pk %}?format=xlsx">Full {{assessment.get_rob_name_display}} Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Get all {{assessment.get_rob_name_display}} reports for an assessment, including individual reviews.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet. Team members only.</i></small></p>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
    {% endif %}

    {% if assessment.enable_data_extraction %}

    {% if assessment.has_animal_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">Animal Bioassay Data</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'animal:api:assessment-full-export' assessment.pk %}?format=xlsx">Full Animal Data Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Retrieve complete animal data.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'animal:api:assessment-endpoint-export' assessment.pk %}?format=xlsx">Endpoint Summary &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Retrieve endpoint animal data.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
            </ul>
        </div>
    </div>
    {% endif %}
    
    {% if assessment.has_epi_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">Epidemiology Data</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                        {% if assessment.epi_version == EpiVersion.V1 %}
                        <a class="btn btn-primary my-1" href="{% url 'epi:api:assessment-export' assessment.pk %}?format=xlsx">Full Epi Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                        {% elif assessment.epi_version == EpiVersion.V2 %}
                        <a class="btn btn-primary my-1" href="{% url 'epiv2:api:assessment-export' assessment.pk %}?format=xlsx">Full Epi Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                        {% endif %}
                    </p>
                    <p class="text-muted">Retrieve epidemiology data.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
            </ul>
        </div>
    </div>

    {% endif %}

    {% if assessment.has_epimeta_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">Epidemiology meta-analysis data</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'meta:api:assessment-export' assessment.pk %}?format=xlsx">Full Epi-Meta Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Retrieve epidemiology meta-analysis data.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
            </ul>
        </div>
    </div>
    {% endif %}
    
    {% if assessment.has_invitro_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">In-vitro Data</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'invitro:api:assessment-full-export' assessment.pk %}?format=xlsx">Full In-Vitro Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Retrieve in-vitro data.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
            </ul>
        </div>
    </div>
    {% endif %}

    {% if assessment.has_eco_data %}
    <div class="card my-3">
        <h3 class="card-header" style="font-size: 1.15rem;">Ecological Data</h3>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item pb-3">
                    <a class="btn btn-primary my-1" href="{% url 'eco:api:assessment-export' assessment.pk %}?format=xlsx">Full Eco Export &nbsp; <i class="fa fa-download" aria-hidden="true"></i></a>
                    <p class="text-muted">Get full ecological dataset.</p>
                    <p><small><i class="text-muted">Excel Spreadsheet</i></small></p>
                </li>
            </ul>
        </div>
    </div>
    {% endif %}

  </div>
{% endif %}
{% endblock %}
